# ISSMR
This is the very beginning of the mobile robots

# 介绍
本课题旨在制作一款能够跟随人的室内（搬运）机器人，其应用场景可以在机场或者货仓等室内场景。

# 技术方案  
本课题处于第一代迭代阶段，实施过程中较为侧重软件算法部分的实现。硬件方面，中心处理器采用Raspberry Pi(4b)，室内定位传感器采用UWB，深度相机realsense D435，小车运动控制采用STM32F4。  

主要思路：
1）将UWB基站铺设在室内的角落各处，铺设区域张成矩形形状。通过UWB基站，建立局域地图坐标信息。  
2）在UWB检测覆盖范围内，人和机器人各持一个移动标签，利用UWB实时获取人和机器人的位置信息。根据人和机器人的相对距离信息，采用距离环PID控制小车和人保持一个较为稳定的相对距离；同时积分获取小车IMU姿态角度，与人和小车的相对角度做一个角度环控制，保证小车的偏航角YAW始终朝向人的坐标位置，实现小车对人的目标实时跟随。  
3)在跟随过程中，通过小车的前置摄像头采集小车前侧的障碍物，在运动过程中，当任何小车的相对位置间有障碍物出现（人），小车可以及时停止；当障碍物通过后，获取的障碍物目标图像消失，小车会继续跟随持有标签的人移动，且通过距离PID始终保证和人的相对距离控制在1000cm。  

# 技术细节  

关于相机：采用Intel Realsense D435 相机，基于其开源库进行开发，其仓库已经以子仓库的形式放在了本仓库。碰撞检测的基本思想为两种，一是进行图像分割然后匹配深度，而是直接利用其深度成像原理进行一个“高置信度”深度值的选取达到目标。更多细节见depth camera folder。  

